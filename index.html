<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Motivational Add-on</title>
  <script src="https://cc-embed.adobe.com/sdk/v1/cc-embed.js"></script>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #f0f0f0; }
    input, button { padding: 0.5em; font-size: 1em; margin-top: 0.5em; }
  </style>
</head>
<body>
  <h2>Generate a Quote</h2>
  <input id="prompt" placeholder="Type something like 'deep thoughts'..." size="40"/>
  <br>
  <button onclick="generateQuote()">Generate</button>

  <script>
    async function generateQuote() {
      const prompt = document.getElementById('prompt').value;
      const bg = pickBackground(prompt);

      const response = await fetch('/quote', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt })
      });
      const { quote } = await response.json();

      // Insert background image
      await adobeExpressSdk.editor.insertImage({ url: bg });

      // Insert AI-generated text
      await adobeExpressSdk.editor.insertText({ text: quote });
    }

    function pickBackground(prompt) {
      const lower = prompt.toLowerCase();
      if (lower.includes("life") || lower.includes("peace")) return "https://images.unsplash.com/photo-1506744038136-46273834b3fb";
      if (lower.includes("deep") || lower.includes("dark")) return "https://images.unsplash.com/photo-1504674900247-0877df9cc836";
      if (lower.includes("sunrise") || lower.includes("hope")) return "https://images.unsplash.com/photo-1501785888041-af3ef285b470";
      return "https://images.unsplash.com/photo-1499084732479-de2c02d45fc4"; // default
    }
  </script>
</body>
</html>

